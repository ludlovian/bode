var Promise=function n(t){if("function"!=typeof t)throw new TypeError("bad resolver");var r,e=-1,o=[],u={},f=function(){o.map(function(n){return n[e](r)}),o=[]},i=function(n){r=n,e=1,f()},c=function(n){if(n===u)return i(new TypeError("self-resolve"));if(n&&("function"==typeof n||"object"==typeof n)){var t;try{t=n.then}catch(n){return i(n)}if("function"==typeof t)return runResolver(t.bind(n),c,i)}r=n,e=0,f()};return u.then=function(t,r){return new n(function(n,u){o.push([handler(t,n,u)||n,handler(r,n,u)||u]),e>=0&&f()})},runResolver(t,c,i),u};function runResolver(n,t,r){var e=0,o=function(n){return function(t){0==e++&&n(t)}};try{n(o(t),o(r))}catch(n){o(r)(n)}}function handler(n,t,r){if("function"==typeof n)return function(e){return asap(function(){try{t(n(e))}catch(n){r(n)}})}}var asap=function(n){return void 0===n&&(n=[]),function(t){1===n.push(t)&&(setImmediate||setTimeout)(function(){for(var t=n.shift();t;t=n.shift())t()})}}();export default Promise;
//# sourceMappingURL=index.js.map
