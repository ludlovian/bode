var Promise=function n(r){if("function"!=typeof r)throw new TypeError("bad resolver");var t,e=-1,o=[],u={},f=function(){o.map(function(n){return n[e](t)}),o=[]},i=function(n){t=n,e=1,f()},c=function(n){if(n===u)return i(new TypeError("self-resolve"));if(n&&("function"==typeof n||"object"==typeof n)){var r;try{r=n.then}catch(n){return i(n)}if("function"==typeof r)return runResolver(r.bind(n),c,i)}t=n,e=0,f()};return u.then=function(r,t){return new n(function(n,u){o.push([handler(r,n,u)||n,handler(t,n,u)||u]),e>=0&&f()})},runResolver(r,c,i),u};function runResolver(n,r,t){var e=0,o=function(n){return function(r){return e++||n(r)}};try{n(o(r),o(t))}catch(n){o(t)(n)}}function handler(n,r,t){if("function"==typeof n)return function(e){return asap(function(){try{r(n(e))}catch(n){t(n)}})}}var asap=function(n){return void 0===n&&(n=[]),function(r){1===n.push(r)&&(setImmediate||setTimeout)(function(){for(var r=n.shift();r;r=n.shift())r()})}}();export default Promise;
//# sourceMappingURL=index.js.map
